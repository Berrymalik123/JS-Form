<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Signup</title>
</head>
<body>
    <header style="background-color: aqua; color: white; padding: 20px; font-weight: bold; font-size: 20px;">
        <marquee behavior="" direction="" >Welcome In Our Website!</marquee>
    </header>
    <form id="loginform">
        <h1>Login</h1>
        <label for="loginEmail" >Email:</label>
        
        <input type="email" id="loginEmail" required placeholder="Enter your Email">


        <label for="loginPassword">Password:</label>
        <input type="password" id="loginPassword" required placeholder="Enter your Password">
        <button type="submit">Login</button>
        <div id="loginMessage"></div>
        <p>Don't have an account? <a href="signup.html">SignUp here</a></p>
    </form>
    
 
    
    <script>
        
        function loginUser(email,password) {
            return new Promise((resolve, reject) => {
                setTimeout(() => {
                    let users;
                    try {
                        users = JSON.parse(localStorage.getItem("users")) || {};
                    } catch (e) {
                        users = {}; // Handle any parsing error
                    }
    
                    if (email && password && users[email].password === password) {
                        resolve("Login Successful! Redirecting...");
                        setTimeout(() => {
                            window.location.href = "dash.html";
                        }, 2000);
                    } else {
                        reject("Login failed. User not found.");
                    }
                }, 2000);
            });
        }
    
        document.getElementById("loginform").addEventListener("submit", async function (event) {
            event.preventDefault();
    
            const email = document.getElementById("loginEmail").value;
            const password = document.getElementById("loginPassword").value; // Correct email input reference
            const messageDiv = document.getElementById("loginMessage"); // Correct messageDiv reference
    
            messageDiv.innerHTML = "Processing.....";
    
            try {
                const successMessage = await loginUser(email, password);
                messageDiv.innerHTML = `<p style="color:green;">${successMessage}</p>`;
            } catch (errorMessage) {
                messageDiv.innerHTML = `<p style="color:red;">${errorMessage}</p>`;
            }
        });
    </script>
    
</body>
</html>